<!DOCTYPE html>
<html lang="en" ng-app="prayerHubApp">
<head>
  <title><%= title %></title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.3.0/angular-ui-router.min.js"></script>
  <script src="/javascripts/app.js"></script>
  <script src="/javascripts/appController.js"></script>
  <script src="/javascripts/indexController.js"></script>
  <script src="/javascripts/causesController.js"></script>
  <script src="/javascripts/causeViewController.js"></script>
  <style>    
    /* Set black background color, white text and some padding */
    footer {
      background-color: #555;
      color: white;
      padding: 15px;
    }
  </style>
</head>
<body ng-controller="AppController as appCtrl" ng-init="appCtrl.initialize(<%= JSON.stringify(user) %>, <%= JSON.stringify(token) %> )">
  <input type="hidden" id="jwts" ng-model="appCtrl.token" value="<%= token %>"/>
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Prayer Hub</a>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#">Causes</a></li>
          <li><a href="#">Pledges</a></li>
          <li><a href="#">About</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#"><span class="glyphicon glyphicon-user"></span> {{appCtrl.user.name}}</a></li>
        </ul>
      </div>
    </div>
  </nav>
    
  <div class="container text-center">    
    <div class="row">
      <div class="col-sm-3 well">
        <div class="well">
          <p><a href="#">My Profile</a></p>
          <img ng-src="{{appCtrl.user.avatar}}" class="img-circle" height="100" width="100" alt="Avatar">
        </div>
        <div class="well">  
          <big>Stats</big>
          <hr>
          <p>Pledges made: {{appCtrl.user.pledges}}</p>
          <p>User Status: {{appCtrl.user.role}} </p>
          <p>Causes created: {{appCtrl.user.causes}}</p>
        </div>
        <p><a href="#">About</a></p>
        <p><a ui-sref="causes">Causes</a></p>
        <p><a href="#">Pledges</a></p>
        <p><a href="/logout">Logout</a></p>
      </div>
      <div class="col-sm-7">
        <div class="row">
          <div class="col-sm-12">
            <h1>Prayer Hub</h1>
            <h4>Reconnecting the world to the divine</h4>
          </div>
        </div>
        <div ui-view onload="indexCtrl.initialize(<%= JSON.stringify(user) %>)"></div>
      </div>
      <div class="col-sm-2 well">
        <h3>Upcoming Pledges</h3>
        <div class="well" ng-repeat="pledge in appCtrl.pledges">
          <p>Upcoming Pledge:</p>
          <p><strong>{{pledge.title}}</strong></p>
          <p>Date: {{pledge.pledgeAt| date: "MMMM dd, yyyy"}}</p>
          <p>Time: {{pledge.pledgeAt| date: "hh:mm a"}}</p>
          <p>Duration: {{pledge.howLong| duration}}</p>
        </div>      
            
      </div>
    </div>
  </div>
  <footer class="container-fluid text-center">
    <p>Prayer Hubâ’¸ 2016</p>
  </footer>
</body>
</html>
